# BugMod

色々なバグっぽいことが起こるMod

## 動作環境・利用ライブラリ
- Minecraft 1.16.5
- FabricMC 1.16.5
  - [fabric-api 0.40.0+1.16](https://github.com/FabricMC/fabric/releases/tag/0.40.0%2B1.16)
  - [Satin 1.5.1](https://github.com/Ladysnake/Satin/releases/tag/1.5.1)
## コマンド
### 概要

/bug でゲーム内でUsageを確認可能

- bug

    - start

      ゲームを開始する

    - stop

        ゲームを終了する

    - showParam

        ゲームで設定可能なパラメータの値を見る(パラメータについては以降を参照)

    - showParam <playerName>

        ゲームで設定可能なプレイヤー毎のパラメータ値を見る(パラメータについては以降を参照)

    - setParam <ParameterName> <value>

        ゲームで利用するパラメータの値を設定する(パラメータについては以降を参照)
        
    - setParam resetUpdateLevelProbability

        ゲームで利用するパラメータのうち、バグのレベル更新の確率の設定をデフォルトに戻す

## (条件を満たした時に)発生する効果

* 条件を満たすとバグやバグを回復する効果が発生する
  * 条件の行動を何回も行うとパラメータの値が増加してバグが強くなっていく
  * バグがどのように強くなっていくかは「setParamで設定可能な項目」を参照

| 条件                | 発生する効果                                                 | 対応するパラメータ |
| ------------------- | ------------------------------------------------------------ | ------------------ |
| 松明を置く          | プレイヤーの画面が赤く染まる。バグが強くなるとより強く画面が染まる。 | redscreenLevel     |
| 水/溶岩バケツを使う | プライヤーの画面が黒く削れる（覆われる）。バグが強くなると削れる面積が広くなる。 | breakscreenLevel   |
| ブロックを壊す      | プレイヤーの周囲のブロックがバグブロックに変わる。バグが強くなるとバグブロックの発生確率が増すしたり、壊した時に虫が発生するようになる。 | breakblockLevel    |
| 特定アイテムをクラフトする | プレイヤーのスキンがバグる。バグが強くなるとスキンがバグる割合が広くなる。<br />デフォルトで鉄ピッケルを作成するときにバグるが、以降のaddBreakSkinItem, removeBreakSkinItemでバグらせるアイテムを追加、削除可能 | breakskinLevel     |
| プレイヤーが死ぬ    | プレイヤーのチャットがバグる。バグが強くなると多くの文字がバグるようになる。 | garbledcharLevel   |
| プレイヤーがモブをkillする | 一部Mobのテクスチャがバグる。バグが強くなるとMobの対象が増える。 | breakmobtextureLevel |
| ミルク入りバケツを使う | 上記のバグを一段階下げる。段階については以降のパラメータ参照。 | なし |



## setParamで設定可能な項目

* /bug setParamで各種パラメータなどゲーム内で利用する設定値を設定可能

### レベル

* 設定可能
  * プレイヤー全体に指定するパラメータ(breakblockLevel, breakskinLevel, breakMobTextureLevel)
    * /bug setParam <パラメータ> <値>
  * 個別プレイヤー毎の指定するパラメータ(redscreenLevel, breakscreenLevel, garbledcharLevel対応)
    * /bug setParam <パラメータ> <プレイヤー名> <値>
* 数値が大きいほど効果が強くなる（0は効果がない状態）
  * 初期値は全て0
* /bug stopをすることで全て初期値に戻る

| パラメータ           | 内容                                  | 値による効果                                                 | 値の範囲 | その他                                                       |
| -------------------- | ------------------------------------- | ------------------------------------------------------------ | -------- | ------------------------------------------------------------ |
| redscreenLevel       | 画面を赤く染めるパラメータ            | 値が大きいほど画面が赤くなる                                 | 0 ~ 16   | - プレイヤー個別で値を保持                                   |
| breakscreenLevel     | 画面を黒く覆うパラメータ              | 値が大きいほど画面覆う面積が大きくなる                       | 0 ~ 30   | - プレイヤー個別で値を保持                                   |
| breakblockLevel      | バグブロックに関するパラメータ        | いくつか異なる効果あり<br />* 1 ~：周辺ブロックをバグブロックに変える<br />* 3：バグブロック破壊時に虫の声が聞こえる<br />* 4 ~ ：バグブロック破壊時に虫が生まれる | 0 ~ 5    | - プレイヤー全体で値を共有                                   |
| breakskinLevel       | スキンをバグらせるパラメータ          | 値が大きいほどスキンがバグる                                 | 0 ~ 5    | - プレイヤー全体で値を共有                                   |
| garbledcharLevel     | チャットをバグらせるパラメータ        | 値の数だけチャットの文字がバグる(文字化けっぽくなる)<br />値が最大だと全ての文字がバグる | 0 ~ 15   | - プレイヤー個別で値を保持                                   |
| breakMobTextureLevel | Mobのテクスチャをバグらせるパラメータ | 値が増えるごとにバグるMobが増える<br />* 1 ~ ： cow pig<br/>* 2 ~ ： chicken sheep<br/>* 3 ~ ： creeper zombie<br/>* 4 ~ ： spieder skeleton<br/>* 5 ~ ： blaze ghast<br/>* 6 ~ ： silverfish, endermite enderman<br/> | 0 ~ 6    | - プレイヤー全体で値を共有<br />- 本パラメータと無関係にエンダードラゴンは最初からバグっています |



### 確率

* /bug setParam <パラメータ> <値> で設定可能
* 命名が対応するレベルが上がる割合を決めるパラメータ（1.0なら特定条件を満たした時に確実にレベルが上がる）

| パラメータ                            | デフォルト値 |
| ------------------------------------- | ------------ |
| redscreenProbability                  | 1.0          |
| breakscreenProbability                | 1.0          |
| breakblockProbability                 | 0.01         |
| breakskinProbability                  | 0.5          |
| garbledcharProbability                | 1.0          |
| breakMobTextureUpdateLevelProbability | 1.0          |

### on/off系の設定

* /bug setParam <パラメータ> <値> で設定可能
* ゲーム中のon/offを切り替えるような設定
  * trueがonの扱いになる
* /bug stopを実行してもリセットされない

| パラメータ             | 内容                                                         | 設定可能な値      | デフォルト値 |
| ---------------------- | ------------------------------------------------------------ | ----------------- | ------------ |
| recoveryMode           | 値がtrueの場合、ミルク入りバケツ の使用時にいづれかのバグのレベルを1段階下げる | true または false | true         |
| showUpdateLevelMessage | 値がtrueの場合、バグのレベル更新時のメッセージを出力する     | true または false | true         |

### その他の設定

* /bug setParam <パラメータ> <値> で設定可能
* /bug stopを実行してもリセットされない

| 設定名              | 内容                                 | 設定可能な値                            |
| ------------------- | ------------------------------------ | --------------------------------------- |
| addBreakSkinItem    | スキンをバグらせるアイテムを追加する | minecraft:wooden_axe など任意のアイテム |
| removeBreakSkinItem | スキンをバグらせるアイテムを削除する | minecraft:wooden_axe など任意のアイテム |

### リセット

* /bug setParam <パラメータ> で設定可能
* 確率のパラメータを全てリセットする

| パラメータ                  |
| --------------------------- |
| resetUpdateLevelProbability |
